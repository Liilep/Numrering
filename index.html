<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Textnummermodifierare</title>
</head>
<body>
    <h1>Textnummermodifierare</h1>

    <input type="file" id="fileInput" />
    <button onclick="processFile()">Bearbeta fil</button>

    <textarea id="output" rows="20" cols="80" placeholder="Bearbetad text visas här..." readonly></textarea>

    <script>
        function processFile() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];

            if (!file) {
                alert('Vänligen välj en fil att bearbeta.');
                return;
            }

            const reader = new FileReader();

            reader.onload = function(event) {
                let text = event.target.result;
                text = modifyText(text);
                document.getElementById('output').value = text;
            };

            reader.readAsText(file);
        }

        function modifyText(text) {
            let lines = text.split('\n');
            let currentNumber = 1; // Starta numreringen från 1

            // Gå igenom alla rader i filen
            for (let i = 0; i < lines.length; i++) {
                // Kolla om raden innehåller 'SeatAdd'
                if (lines[i].includes('SeatAdd') && !lines[i].includes('RowAdd')) {
                    // Här matchar vi Name för att byta ut numret
                    const match = lines[i].match(/Name=(\d+)/);
                    if (match) {
                        let name = parseInt(match[1]);

                        // Byt ut numret för varje "SeatAdd" rad med det aktuella numret
                        lines[i] = lines[i].replace(/Name=\d+/, `Name=${currentNumber}`);
                        
                        // Öka räknaren för nästa rad
                        currentNumber++;
                    }
                }
            }

            // Slå ihop raderna tillbaka till en textsträng
            return lines.join('\n');
        }
    </script>
</body>
</html>
