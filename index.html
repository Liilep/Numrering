<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Textnummermodifierare</title>
</head>
<body>
    <h1>Textnummermodifierare</h1>

    <input type="file" id="fileInput" />
    <button onclick="processFile()">Bearbeta fil</button>

    <textarea id="output" rows="20" cols="80" placeholder="Bearbetad text visas här..." readonly></textarea>

    <script>
        function processFile() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];

            if (!file) {
                alert('Vänligen välj en fil att bearbeta.');
                return;
            }

            const reader = new FileReader();

            reader.onload = function(event) {
                let text = event.target.result;
                text = modifyText(text);
                document.getElementById('output').value = text;
            };

            reader.readAsText(file);
        }

        function modifyText(text) {
            let lines = text.split('\n');
            let counter = 1;

            for (let i = 0; i < lines.length; i++) {
                // Kontrollera om raden är en SeatAdd
                if (lines[i].includes('SeatAdd') && !lines[i].includes('RowAdd')) {
                    // Hitta "Name=" och ändra numret
                    const match = lines[i].match(/Name=(\d+)/);
                    if (match) {
                        let name = parseInt(match[1]);

                        // Justera numreringen baserat på tidigare regler
                        if (counter <= 4) {
                            // Lämna de första fyra raderna som de är
                            counter++;
                        } else if (counter <= 8) {
                            // Öka numret med 24 för rader 5 till 8
                            name += 24;
                            counter++;
                        } else {
                            // Fortsätt numreringen för rader 9 och framåt
                            name = counter + 24;
                            counter++;
                        }

                        // Ersätt det gamla namnet med det nya
                        lines[i] = lines[i].replace(/Name=\d+/, `Name=${name}`);
                    }
                }
            }

            return lines.join('\n');
        }
    </script>
</body>
</html>
